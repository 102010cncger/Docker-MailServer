#!/usr/bin/env bash

# For installation local MySQL set:
# MYSQL_SERVER='127.0.0.1'
# MYSQL_GRANT_HOST='localhost'

export STORAGE_BASE_DIR=${STORAGE_BASE_DIR:-/var/vmail}
export MYSQL_SERVER=${MYSQL_SERVER:-127.0.0.1}
export MYSQL_SERVER_PORT=${MYSQL_SERVER_PORT:-3306}
export MYSQL_GRANT_HOST=${MYSQL_GRANT_HOST:-localhost}
export MYSQL_ROOT_USER=${MYSQL_ROOT_USER:-root}
export MYSQL_ROOT_PASSWD=${MYSQL_ROOT_PASSWD:-8LVUp2nNK0}
export FIRST_DOMAIN=${FIRST_DOMAIN:-mailserver.onlyoffice.com}
export DOMAIN_ADMIN_PASSWD=${DOMAIN_ADMIN_PASSWD:-orC61TNQ15}
export CONFIGURATION_ONLY=${CONFIGURATION_ONLY:-'NO'}

# Only for local MySQL:
export MAIL_DB_EXTERNAL_USER=${MAIL_DB_EXTERNAL_USER:-mail_admin}
export MAIL_DB_EXTERNAL_PASSWD=${MAIL_DB_EXTERNAL_PASSWD:-Isadmin123}
export MAIL_DB_EXTERNAL_GRANT_HOST=${MAIL_DB_EXTERNAL_GRANT_HOST:-''}

export VMAIL_USER_HOME_DIR="${STORAGE_BASE_DIR}"
export STORAGE_MAILBOX_DIR="${STORAGE_BASE_DIR}/vmail1"
export SIEVE_DIR="${STORAGE_BASE_DIR}/sieve"
export BACKUP_DIR="${STORAGE_BASE_DIR}/backup"
export BACKUP_SCRIPT_OPENLDAP="${STORAGE_BASE_DIR}/backup/backup_openldap.sh"
export BACKUP_SCRIPT_MYSQL="${STORAGE_BASE_DIR}/backup/backup_mysql.sh"
export BACKUP_SCRIPT_PGSQL="${STORAGE_BASE_DIR}/backup/backup_pgsql.sh"
export BACKEND_ORIG='MYSQL'
export BACKEND='MYSQL'
export SQL_SERVER="${MYSQL_SERVER}"
export SQL_SERVER_PORT="${MYSQL_SERVER_PORT}"
export DOMAIN_ADMIN_NAME='postmaster'
export DOMAIN_ADMIN_PASSWD_PLAIN="${DOMAIN_ADMIN_PASSWD}"
export SITE_ADMIN_NAME="${DOMAIN_ADMIN_NAME}@${FIRST_DOMAIN}"
export SITE_ADMIN_PASSWD="${DOMAIN_ADMIN_PASSWD}"
export FIRST_USER="${DOMAIN_ADMIN_NAME}"
export FIRST_USER_PASSWD="${DOMAIN_ADMIN_PASSWD}"
export FIRST_USER_PASSWD_PLAIN="${DOMAIN_ADMIN_PASSWD}"
export ENABLE_DKIM='YES'
export USE_IREDADMIN='NO'
export USE_WEBMAIL='NO'
export USE_RCM='NO'
export REQUIRE_PHP='NO'
export USE_AWSTATS='YES'
export VMAIL_DB='onlyoffice_mailserver'
export VMAIL_DB_ADMIN_USER="${MYSQL_ROOT_USER}"
export VMAIL_DB_ADMIN_PASSWD="${MYSQL_ROOT_PASSWD}"
export AMAVISD_DB_NAME="${VMAIL_DB}"
export AMAVISD_DB_USER="${MYSQL_ROOT_USER}"
export AMAVISD_DB_PASSWD="${MYSQL_ROOT_PASSWD}"
export SPAMASSASSIN_DB_NAME="${VMAIL_DB}"
export SPAMASSASSIN_DB_USER="${MYSQL_ROOT_USER}"
export SPAMASSASSIN_DB_PASSWD="${MYSQL_ROOT_PASSWD}"
export CLUEBRINGER_DB_NAME="${VMAIL_DB}"
export CLUEBRINGER_DB_USER="${MYSQL_ROOT_USER}"
export CLUEBRINGER_DB_PASSWD="${MYSQL_ROOT_PASSWD}"
export LDAP_BINDPW='3CDwkWqRggjKKnZbR8JQmyN4GJbpjg'
export LDAP_ADMIN_PW='9HjJExGB4aWZ9hnkSYpYqTZ4jyqbxB'
#EOF